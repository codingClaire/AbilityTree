# 三 栈和队列

## **栈**
### **栈的基本概念**
栈 限定旨在表头进行插入(入栈）和删除（出栈）操作的线性表
表头为栈顶 表尾端称为栈底

设有栈S=(a<sub>1</sub>,a<sub>2</sub>,a<sub>3</sub>...a<sub>n</sub>)

a<sub>1</sub> **栈底元素**
a<sub>n</sub> **栈顶元素**
后进先出的线性表（LIFO)

#### **栈的基本操作**
* 返回栈元素的个数`int Length() const`
* 判断栈是否为空`bool Empty() const`
* 清空栈 `void Clear()`
* 遍历栈的元素 `void Traverse(void(*Visit)(E &))`
* 插入新的栈顶元素 `StatusCode Push(const E &e)`
* 用e返回栈顶元素 `StatusCode Top(E &e) const`
* 删除栈顶元素 `StatusCode Pop(E &e)`

### **顺序栈**
利用一组**地址连续**的存储单元依次存放从栈底到栈顶的数据元素  
将数据元素类型为E的数据元素存储在数组中  
栈的实际元素个数:count  
当count=0 栈为空  
每插入新的栈顶元素时 如果栈未满 操作成功 count++  
**溢出**
当栈满时将发生溢出 为了避免需要为栈设立一个足够大的存储空间  
程序中存在多个栈时，有的栈膨胀过快 很快发生溢出  
而有的栈可能还有许多多余的空间  

* **n(n=2)个栈共享空间**
解决方法：定义一个足够大的占空间  
存储空间的两端分别设为两个栈的栈底 栈顶都向中间延伸  
直到栈顶相遇才发生溢出

* **n(n>2)个栈共享空间**
处理复杂，在插入、删除时需要移动大量元素 时间代价大  
解决办法：链栈  

### **链栈**

程序中存在多个栈时 链式栈可以提高存储效率   
达到共享存储空间的目的  
不使用带头节点直接实现  
#### 例子
设计算法判别字符串表示的表达式是否配对出现

***
## **队列**
先进先出的线性表 FIFO  
只允许在一端进行插入（入队）操作 在另一端进行删除（出队）操作  

设有队列q=(a<sub>1</sub>,a<sub>2</sub>,a<sub>3</sub>...a<sub>n</sub>)

a<sub>1</sub> **队头元素**
a<sub>n</sub> **队尾元素**
（队头元素是第一个出现的元素)

### **双端队列**
一种限定性的数据结构  
插入和删除限定在线性表的两端进行的线性表  
* **输入受限的双端队列**

一端可进行插入/删除 另一端只能进行删除

* **输出受限的双端队列**

一端可进行插入/删除 另一端只能进行插入

### **链队列**（链式存储结构）
用链表表示的队列称为链队列

一个链队列应有两个分别指示队头和队尾的指针
**头指针和尾指针**

退出元素：从单链表第一个结点取出队头元素 删除此节点  
进入元素：从单链表的最后一个元素后边存放一个新的元素   
这个新的元素将成为新的队尾  

链队列适合
* **数据元素个数变动比较大的情形**  
 不存在溢出的问题
* 如果程序要**使用多个队列**  
不会出现存储分配的问题 也不必进行元素的移动

### **循环队列**（顺序存储结构）
* 一维数组elem
* 设立front和rear 表示队头和队尾
* maxSize 队列的最大元素个数

空队列时front和rear 都指向同一个空间

**假溢出**

|0|1|2|3|4|
|--|--|--|--|--|
|  |  | C| D| E|

front指向2 rear指向4  
队列的实际可用空间还没有使用完，但是不能再继续插入元素了，否则会因为数组越界而出错  

解决方法：
将顺序队列**逻辑上**看成一个环 称为**循环队列**  

当front和rear进入maxSize-1时，再进一个位置就自动移动到0，可用取余运算实现  

```
队头进1 front=(front+1)%maxSize
队尾进1 rear=(rear+1)%maxSize
```

**队列空或者队满时都有关系`front=rear`**

解决方法：
* 另设一个标志来区别
* 少用一个元素空间 约定队头在队尾指针的下一位置时队满

**队列应用：显示二项式(a+b)^i的系数**

### **优先队列**
先进先出的机制需要优先队列来完善

元素的固有位置-->对基本操作的执行结果

优先队列的两种类型
* **最小优先队列** 出队操作将删除最小的数据元素值

* **最大优先队列** 出队操作将删除最小的数据元素值

优先队列的实现方法：

入队操作时元素不是排在队列的队尾，而是将其插入队列的适当位置  
（队列元素有序）  

优先队列可以作为**队列类的派生**来实现  
重载入队操作即可  

### **实例研究**
* 表达式求值
* 事件驱动模拟
